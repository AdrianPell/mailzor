{"name":"Mailzor","body":"# mailzor\r\n\r\nMailzor is a basic utility library to help generate and send emails using the Razor view engine to populate email templates, designed to be quickly pluggable into your .NET app.\r\n\r\nThe original idea for this is from [Kazi Manzur Rashid](https://twitter.com/manzurrashid), with the...\r\n\r\n - Original blog post covering it here:\r\n  - [kazimanzurrashid.com/use-razor-for-email-template-outside-asp-dot-net-mvc]( http://kazimanzurrashid.com/posts/use-razor-for-email-template-outside-asp-dot-net-mvc )\r\n - Original code\r\n   - [EmailTemplate.zip]( http://media.kazimanzurrashid.s3.amazonaws.com/EmailTemplate.zip )\r\n\r\n## This fork\r\n\r\nIs about making it easier to get up and running, via a nuget package and support for IoC wireup.\r\n\r\n - A single entry point via `IEmailSystem`\r\n - Send message via `SendMail` on `IEmailSystem`\r\n - Some additional template loading checking, to ensure they're available and that it reports when it can't find them (in particular which template it couldn't find).\r\n\r\n## NuGet\r\n\r\n **Current Version: 1.0.0.11**\r\n \r\n Get it from [nuget.org/packages/mailzor](https://nuget.org/packages/mailzor) or via Package Manager Console\r\n \r\n  > *PM> Install-Package mailzor*\r\n\r\n## Testing\r\n\r\nIn the repository open \\ExperienceTesting\\Mvc4TestApp\\Mvc4TestApp.sln - it makes use of the nuget package. It's also an example of the MailzorModule Autofac wireup logic.\r\n\r\nHave [smpt4dev](http://smtp4dev.codeplex.com/) running or configure it to a real mail server and see it deliver a test message.\r\n\r\n - Functions with:\r\n   - Razor 1.0 in ASP.NET MVC 3\r\n   - Razor 2.0 in ASP.NET MVC 4\r\n\r\n## Building from source\r\n\r\nRun build.bat which calls out to a [psake](http://en.wikipedia.org/wiki/Psake) script `mailzor-build.ps1`. The dependant Razor assembly will be ilmerged as part of the build.\r\n\r\n\r\n# Usage\r\n\r\n\tIEmailSystem mailzor;\r\n\t\r\n\tmailzor.SendMail(\r\n\t\tnew TaskNotificationMessage\r\n                    {\r\n                        To = \"email@domain.com\",\r\n                        From = \"source@domain.com\"\r\n                    });\r\n\r\n\r\n## IoC Wireup\r\n\r\nUsing an Autofac module (or just using this registration code in your composition root) to wire up the dependencies for the `mailzor` utility.\r\n\t\r\n\tbuilder.RegisterModule(new MailzorModule \r\n\t\t{ \r\n\t\t\tTemplatesDirectory = @\"..\\Templates\",\r\n\t\t\tSmtpServerIp = \"127.0.0.1\", // your smtp server\r\n\t\t\tSmtpServerPort = 25\r\n\t\t});\r\n\r\n### Autofac\r\n\r\n\tpublic class MailzorModule : Autofac.Module\r\n\t{\r\n\t\tpublic string TemplatesDirectory { get; set; }\r\n\t\tpublic string SmtpServerIp { get; set; }\r\n\t\tpublic int SmtpServerPort { get; set; }\r\n\t\r\n\t\tprotected override void Load(ContainerBuilder builder)\r\n\t\t{\r\n\t\t\tbuilder\r\n\t\t\t\t.Register(\r\n\t\t\t\t\tc => new FileSystemEmailTemplateContentReader(TemplatesDirectory))\r\n\t\t\t\t.As<IEmailTemplateContentReader>();\r\n\t\r\n\t\t\tbuilder\r\n\t\t\t\t.RegisterType<EmailTemplateEngine>()\r\n\t\t\t\t.As<IEmailTemplateEngine>();\r\n\t\r\n\t\t\tbuilder\r\n\t\t\t\t.Register(\r\n\t\t\t\t\tc => new EmailSender\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tCreateClientFactory = () \r\n\t\t\t\t\t\t\t\t=> new SmtpClientWrapper(new SmtpClient(SmtpServerIp, SmtpServerPort))\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tDefaultFromAddress = \"sourceOfEmails@domain.com\")\r\n\t\t\t\t.As<IEmailSender>();\r\n\t\r\n\t\t\tbuilder\r\n\t\t\t\t.Register(\r\n\t\t\t\t\tc => new EmailSubsystem(\r\n\t\t\t\t\t\tc.Resolve<IEmailTemplateEngine>(), \r\n\t\t\t\t\t\tc.Resolve<IEmailSender>()))\r\n\t\t\t\t.As<IEmailSystem>();\r\n\t\t}\r\n\t}\r\n\t\r\n\r\n## Change Log\r\n\r\n Version 1.0.0.11 - Added operational default email support\r\n \r\n Version 1.0.0.10 - Stablised via ilmerge\r\n\r\nVersion 1.0.0.7 - Operational with some limitations.\r\n\r\n## Older version\r\n \r\nIf you tried this prior to 1.0.0.10 there was an issue with incompatible razor versions, more info [here](https://github.com/NickJosevski/mailzor/blob/master/PriorBugs.md).\r\n\r\n## License\r\nLicensed under the MIT license.","note":"Don't delete this file! It's used internally to help with page regeneration.","google":"","tagline":"Using the Razor view engine to create email templates, quickly pluggable into your .NET app."}